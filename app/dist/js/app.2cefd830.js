(function(e){function t(t){for(var a,i,r=t[0],l=t[1],p=t[2],u=0,d=[];u<r.length;u++)i=r[u],o[i]&&d.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,p||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var p=0;p<r.length;p++)t(r[p]);var c=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.requirePin?n("div",{staticClass:"content align-center"},[n("form",{on:{submit:e.enterPin}},[n("div",{staticClass:"field"},[n("label",[e._v("What's your PIN?")]),n("br"),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPin,expression:"newPin"}],staticClass:"pin",attrs:{type:"tel",placeholder:"****",maxlength:"4",autofocus:""},domProps:{value:e.newPin},on:{input:function(t){t.target.composing||(e.newPin=t.target.value)}}})]),n("div",{staticClass:"field"},[e.loadingPin?n("button",{attrs:{disabled:"disabled"}},[e._v("\n                    Loading...\n                ")]):n("button",{attrs:{type:"submit"}},[e._v("\n                    Enter PIN\n                ")])])])]):n("div",[e.loading?n("div",{staticClass:"loading content align-center"},[n("p",[e._v("Loading...")])]):n("router-view",{attrs:{app:e.app}})],1)])},s=[],i=(n("7f7f"),n("28a5"),n("0a0d")),r=n.n(i),l=n("f499"),p=n.n(l),c=n("7618"),u=(n("55dd"),n("7514"),n("422b")),d=n.n(u),f=n("a002"),v=n.n(f),m=n("b5c4"),h=n.n(m);function g(e){var t=e.method.toUpperCase(),n=new XMLHttpRequest,a=e.data;if("GET"===t&&"object"===Object(c["a"])(a))for(var o in e.url+="?",e.data)e.url+="&"+encodeURIComponent(o)+"="+encodeURIComponent(e.data[o]);else a=p()(a);return n.addEventListener("readystatechange",function(){if(4===n.readyState){if(n.status>=200&&n.status<300||304===n.status)try{return void e.success.call(e.context,JSON.parse(n.responseText))}catch(t){e.error.call(e.context,t)}e.error.call(e.context,n)}},!1),n.open(t,e.url,"undefined"===typeof e.async||e.async),"undefined"!==typeof e.beforeSend&&e.beforeSend.call(e.context,n),n.setRequestHeader("content-type","application/json"),n.send(a),n}var _,y,x=g,b=h.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32),w={locations:[{id:b(),name:"Main Auditorium",peopleIds:[],_collection:"locations"},{id:b(),name:"Campus #2",peopleIds:[],_collection:"locations"}],people:[{id:b(),name:"Meghann Engberg",_collection:"people"},{id:b(),name:"Dede Pound",_collection:"people"},{id:b(),name:"Zada Geissler",_collection:"people"},{id:b(),name:"Luise Ellingsworth",_collection:"people"},{id:b(),name:"Nichole Bieker",_collection:"people"},{id:b(),name:"Linnea Ginsburg",_collection:"people"},{id:b(),name:"Maynard Marrone",_collection:"people"},{id:b(),name:"Dorian Suriel",_collection:"people"},{id:b(),name:"Shay Azar",_collection:"people"},{id:b(),name:"Caroyln Earley",_collection:"people"},{id:b(),name:"Angelyn Mcdougal",_collection:"people"},{id:b(),name:"Phyllis Carasco",_collection:"people"},{id:b(),name:"Dewey Mccoy",_collection:"people"},{id:b(),name:"Karry Siegal",_collection:"people"},{id:b(),name:"Oretha Bevacqua",_collection:"people"},{id:b(),name:"Kenton Goggans",_collection:"people"},{id:b(),name:"Hermelinda Quevedo",_collection:"people"},{id:b(),name:"Whitney Vanderhoff",_collection:"people"},{id:b(),name:"Arla Cupp",_collection:"people"},{id:b(),name:"Marcene Fernald",_collection:"people"}],staff:[{id:b(),pin:1234,name:"Bob",_collection:"staff"}],dates:[]},C=6e4,P=h.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32),k={locations:["peopleIds"],people:[],days:["locationId"],staff:[]};function I(e){return"people"===e?"person":"staff"===e?"staff":e.slice(0,-1)}var A={data:function(){var e=this;return window.app=e,{app:e,logo:window.logo||"/img/logo.svg",loading:!0,user:void 0,requirePin:void 0,loadingPin:!1,newPin:"",hints:{},locations:[],people:[],days:[],staff:[],unsaved:[],api:!1,store:v.a.createInstance({name:"attend"})}},mounted:function(){var e=this;window.API_URL?(e.applyHints(function(){e.saveUnsavedRemote(function(){e.fetch(function(){e.applySeed(function(){e.loading=!1,setTimeout(function(){e.poll()},C)})})})}),window.addEventListener("online",function(){e.poll()})):alert("No API URL supplied")},computed:{selectedLocation:function(){var e=this;return e.locations.find(function(t){return t.id+""===e.$route.params.id+""})},sortedLocations:function(){var e=this;return e.locations.sort(e.sortByName)}},methods:{enterPin:function(e){var t=this;t.loadingPin=!0,setTimeout(function(){y=t.newPin,t.newPin="","function"===typeof t.requirePin&&t.requirePin.call(t),t.loadingPin=!1,t.requirePin=void 0},100),e.preventDefault()},hideHint:function(e){var t=this;a["a"].set(t.hints,e,!0),t.store.setItem("hint-"+e,!0)},poll:function(){var e=this;clearTimeout(_),e.saveUnsavedRemote(function(){e.fetchRemote(function(){e.afterFetchItems(function(){_=setTimeout(function(){e.poll()},C)})})})},applySeed:function(e){var t=this;if(t.locations.length||t.people.length)return e();t.locations=w.locations,t.people=w.people,t.days=w.days,t.staff=w.staff,e()},merge:function(e,t){if("object"===Object(c["a"])(t))for(var n,a,o=t.length-1;o>=0;o--)if(n=e.find(function(e){return e.id===t[o].id}),n)for(a in n)t[a]=n[a];else e.push(t[o])},fetchLocal:function(e){var t=this;d.a.eachSeries(["locations","people","days","staff","unsaved"],function(e,n){t.store.getItem(e,function(a,o){t.merge(t[e],o||[]),n()})},function(){e()})},fetchRemote:function(e){var t=this;d.a.eachSeries(["locations","people","days","staff"],function(e,n){t.ajax("GET","/"+e,function(a,o){t.merge(t[e],o||[]),n()})},function(){e()})},buildItem:function(e,t){return t.id=t.id||P(),t._collection=t._collection||e,t},fetch:function(e){var t=this;t.fetchLocal(function(){t.fetchRemote(function(){t.afterFetchItems(function(){e()})})})},afterFetchItems:function(e){var t=this;d.a.eachSeries(["locations","people","days","staff"],function(e,n){for(var a=t[e],o=a.length-1;o>=0;o--)t.buildItem(e,a[o]),a[o]._lastUpdatedAt=a[o].updatedAt;n()},function(){e()})},ajax:function(e,t,n,a,o){"function"===typeof n&&(o=n,n=void 0),"function"===typeof a&&(o=a,a=void 0);var s=this;s.confirmPin(function(){x({method:e,url:window.API_URL+"/"+y+t,data:n,beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa(y))},success:function(e){a&&e[a._constructor]&&s.merge([a],[e[a._constructor]]),"function"===typeof o&&o(void 0,e)},error:function(i){if(i&&("GET"!==e&&(s.unsaved.push([e,t,JSON.parse(p()(n)),a?{_collection:a._collection,id:a.id}:void 0]),s.saveUnsavedLocal()),i.status>200&&(console.error(i),401===i.status)))return y=void 0,void s.confirmPin(function(){s.ajax(e,t,n,a,function(){o(),s.poll()})});"function"===typeof o&&o(i)}})})},applyHints:function(e){var t=this;d.a.eachSeries(["lock"],function(e,n){t.store.getItem("hint-"+e,function(o,s){a["a"].set(t.hints,e,!!s),n()})},function(){e()})},confirmPin:function(e){var t=this;y?"function"===typeof e&&e():t.requirePin=e},save:function(e,t,n){"function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0),"object"===Object(c["a"])(e)&&(e._lastUpdatedAt=Math.round(r()()/1e3));var a=this;a.saveLocal(e,t,function(){a.saveRemote(e,t,n)})},isPersisted:function(e){return!e._lastUpdatedAt||e.updatedAt&&e.updatedAt>=e._lastUpdatedAt},saveUnsavedRemote:function(e){var t,n=this,a=[];while(n.unsaved.length)t=n.unsaved.shift(),a.push([t[0],t[1],t[2],t[3]?n[t[3]._collection].find(function(e){return e.id+""===t[3].id+""}):void 0]);n.saveUnsavedLocal(),d.a.eachSeries(a,function(e,t){n.ajax(e[0],e[1],e[2],e[3],t)},function(){e()})},saveUnsavedLocal:function(e){var t=this;t.store.setItem("unsaved",t.unsaved,e)},saveLocal:function(e,t,n){"function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0);var a=this;d.a.eachSeries(["locations","people","days","staff"],function(e,t){a.store.setItem(e,a[e],function(){t()})},function(){n()})},saveRemote:function(e,t,n){"function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0);var a=this;"object"!==Object(c["a"])(e)?d.a.eachSeries(["locations","people","days","staff"],function(e,t){d.a.eachSeries(a[e],function(e,t){a.saveRemoteItem(e,t)},function(){t()})},function(){"function"===typeof n&&n()}):a.saveRemoteItem(e,t,n)},saveRemoteItem:function(e,t,n){"function"===typeof t&&(n=t,t=void 0);var a=this,o={};t?(o[I(e._collection)]={},o[I(e._collection)].id=e.id,o[I(e._collection)][t]=e[t]):o[I(e._collection)]=e,a.ajax("POST","/"+e._collection,o,e,function(t,o){a.swapIds(e,o),"function"===typeof n&&n(t,o)})},swapIds:function(e,t){if(t&&e.id!==t.id){var n,a=this,o=e.id;for(n in e.id=t.id,k){var s=e._collection+"Ids";-1!==k[n].indexOf(s)&&a[n].forEach(function(e){var n=e[s].indexOf(o);-1!==n&&(e[s][n]=t.id,a.saveRemoteItem(e))}),s=I(e._collection)+"Id",-1!==k[n].indexOf(s)&&a[n].filter(function(e){e[s]===o&&(e[s]=t.id,a.saveRemoteItem(e))})}}},addPersonByName:function(e,t,n,a){var o=this,s=o.buildItem("people",{name:t});o.people.push(s),e.peopleIds.push(s.id),a&&(a.q=""),o.save(s,function(){o.save(e,function(){n&&o.present(e,s,n)})})},prepDate:function(e){var t=this;return e instanceof Date?e.getFullYear()+"-"+t.zeroPad(e.getMonth()+1)+"-"+t.zeroPad(e.getDate()):e},formatDate:function(e){var t=e.toDateString().split(" ");return t[1]+" "+t[2]},isPresent:function(e,t,n){if(e instanceof Array){for(var a=e.length-1;a>=0;a--)if(this.isPresent(e[a],t,n))return!0;return!1}return!1},present:function(e,t,n){var a=this,o=a.prepDate(n),s=!a.isPresent(e,t,o),i=a.buildItem("days",{name:[t.id,e.id,o,s].join(","),personId:t.id,locationId:e.id,date:o,present:s});a.days.push(i),a.save(i)},addLocation:function(){var e=this,t=e.locations.length+1,n=e.buildItem("locations",{name:"Location "+t,peopleIds:[]});e.locations.push(n),e.$router.push({name:"locationEdit",params:{id:n.id}}),e.save(n)},addStaff:function(){var e=this,t=e.locations.length+1,n=e.buildItem("staff",{name:"Staff "+t});e.staff.push(n),e.save(n)},remove:function(e,t,n,a,o){var s=this;confirm("Are you sure you want to delete this "+n+"?")&&(e.splice(e.indexOf(t),1),a?s.$router.push("/"):o&&s.$router.go(-1))},star:function(e,t){var n=this;n.isStarred(e,t)?e.peopleIds.splice(e.peopleIds.indexOf(t.id),1):e.peopleIds.push(t.id),n.save(e,"peopleIds")},isStarred:function(e,t){return e.peopleIds=e.peopleIds||[],-1!==e.peopleIds.indexOf(t.id)},zeroPad:function(e,t,n){return t=t||2,n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},sortByName:function(e,t){return(""+e.name).localeCompare(t.name)},sortBycollection:function(e,t){return(""+e.location.name).localeCompare(t.location.name)}}},G=A,S=(n("b37a"),n("2877")),j=Object(S["a"])(G,o,s,!1,null,null,null),D=j.exports,O=n("8c4f"),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Header",{attrs:{app:e.app,title:"Attend"}}),n("div",{staticClass:"content"},[n("table",{staticClass:"table"},[n("tbody",[e._l(e.app.sortedLocations,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{attrs:{to:{name:"location",params:{id:t.id}}}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])],1)])}),n("tr",[n("td",[n("router-link",{attrs:{to:"/analytics"}},[n("strong",[e._v("\n                                Analytics\n                            ")])])],1)]),n("tr",[n("td",[n("router-link",{attrs:{to:"/settings"}},[n("strong",[e._v("\n                                Staff\n                            ")])])],1)])],2)]),n("br"),n("a",{staticClass:"button full-width",attrs:{href:"javascript:;"},on:{click:function(t){return e.app.addLocation()}}},[e._v("\n            + Add Location\n        ")])])],1)},N=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"nav table"},[n("ul",{staticClass:"table-row"},[n("li",{staticClass:"table-cell back-cell"},[e.left?e._t("left"):n("router-link",{staticStyle:{visibility:"hidden"},attrs:{to:"/"}},[e._v("\n                    Â«\n                ")])],2),n("li",{staticClass:"table-cell logo"},[n("a",[e._v(e._s(e.title))])]),n("li",{staticClass:"table-cell back-cell"},[e.right?e._t("right"):n("router-link",{staticStyle:{visibility:"hidden"},attrs:{to:"/"}},[e._v("\n                    Â«\n                ")])],2)])])])},$=[],R={props:["app","back","title","right","left"]},H=R,U=Object(S["a"])(H,q,$,!1,null,null,null),L=U.exports,M={name:"home",props:["app"],components:{Header:L}},T=M,B=Object(S["a"])(T,E,N,!1,null,null,null),z=B.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"location"},[n("Header",{attrs:{app:e.app,left:!0,right:!0,title:e.app.selectedLocation.name},scopedSlots:e._u([{key:"left",fn:function(){return[n("router-link",{attrs:{to:"/"}},[e._v("\n                Â«\n            ")])]},proxy:!0},{key:"right",fn:function(){return[n("router-link",{attrs:{to:{name:"locationEdit",params:{id:e.app.selectedLocation.id}}}},[e._v("\n                âœŽ\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"header no-select"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],attrs:{type:"date"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}}),e.q.length?n("span",{staticClass:"clear-q active",on:{click:function(t){e.q=""}}},[e._v("Ã—")]):e._e(),e.q.length?e._e():n("span",{class:(e.showAll?"active ":"")+"show-all",on:{click:function(t){e.showAll=!e.showAll}}},[e.showAll?n("span",[e._v("Everyone")]):n("span",[e._v("Regulars")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.q,expression:"q"}],attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.q},on:{input:function(t){t.target.composing||(e.q=t.target.value)}}})]),n("table",{staticClass:"table"},[e._m(0),n("tbody",[e._l(e.sortedPeople,function(t){return n("tr",{key:t.id},[n("td",[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return e.app.star(e.app.selectedLocation,t)}}},[e.app.isStarred(e.app.selectedLocation,t)?n("span",{staticClass:"lock"},[e._v("ðŸ”’")]):n("span",[e._v("Â ")])])]),n("td",{staticClass:"align-left"},[n("router-link",{attrs:{to:{name:"personEdit",params:{id:t.id}}}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])],1),n("td",{staticClass:"icons"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return e.app.present(e.app.selectedLocation,t,e.date)}}},[e.app.isPresent(e.app.selectedLocation,t,e.date)?n("span",{staticClass:"check"},[e._v("âœ“")]):n("span",[e._v("Ã—")])])])])}),e.q.length?n("tr",[n("td",{staticClass:"with-padding align-left",attrs:{colspan:"3"}},[e.q.length?n("button",{on:{click:function(t){return e.app.addPersonByName(e.app.selectedLocation,e.q,e.date,e.component)}}},[e._v('\n                            Add "'+e._s(e.q)+'"\n                        ')]):e._e()])]):e._e(),e.sortedPeople.length?e._e():n("tr",[n("td",{staticClass:"with-padding align-left",attrs:{colspan:"3"}},[n("a",{staticClass:"display-block align-center",attrs:{href:"javascript:;"},on:{click:function(t){e.q="",e.showAll=!0}}},[n("br"),e._v("\n                            Nobody is here!\n                            "),n("br"),e._v("\n                            Click here to see everyone.\n                            "),n("br"),n("br")])])])],2),n("tfoot",[n("tr",[n("td"),e._m(1),n("td",{staticClass:"with-padding"},[e._v(e._s(e.total))])])])])])],1)},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticClass:"has-checkbox"},[e._v("\n                        Reg\n                    ")]),n("th",{staticClass:"with-padding align-left"},[e._v("\n                        Name\n                    ")]),n("th",{staticClass:"with-padding"},[e._v("\n                        Present\n                    ")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{staticClass:"with-padding"},[n("strong",[e._v("Total")])])}],J={name:"location",components:{Header:L},props:["app"],data:function(){var e=this,t=new Date;return{q:"",component:this,date:t.getFullYear()+"-"+e.app.zeroPad(t.getMonth()+1)+"-"+e.app.zeroPad(t.getDate()),transition:void 0,showAll:!1}},computed:{sortedPeople:function(){var e=this;return e.people.sort(e.app.sortByName)},people:function(){var e=this,t=e.app.people||[],n=e.app.selectedLocation,a=e.q.toLowerCase();return a&&a.length?t.filter(function(e){return-1!==e.name.toLowerCase().indexOf(a)}):t.filter(function(t){return e.showAll||-1!==n.peopleIds.indexOf(t.id)||e.app.isPresent(n,t,e.date)})},total:function(){var e=this;return e.people.filter(function(t){return e.app.isPresent(e.app.selectedLocation,t,e.date)}).length}}},K=J,W=Object(S["a"])(K,F,Y,!1,null,null,null),Q=W.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"location-edit"},[n("Header",{attrs:{app:e.app,left:!0,title:e.app.selectedLocation.name},scopedSlots:e._u([{key:"left",fn:function(){return[n("router-link",{attrs:{to:{name:"location",params:{id:e.app.selectedLocation.id}}}},[e._v("\n                Â«\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("label",[e._v("Location Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.app.selectedLocation.name,expression:"app.selectedLocation.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.app.selectedLocation.name},on:{blur:function(t){return e.app.save(e.app.selectedLocation,"name")},input:function(t){t.target.composing||e.$set(e.app.selectedLocation,"name",t.target.value)}}})]),n("div",{staticClass:"field"},[n("button",{staticClass:"full-width button-small button-gray",on:{click:function(t){return e.app.remove(e.app.locations,e.app.selectedLocation,"location",!0)}}},[e._v("\n                Delete This Location\n            ")])])])],1)},X=[],Z={name:"locationEdit",components:{Header:L},props:["app"]},ee=Z,te=Object(S["a"])(ee,V,X,!1,null,null,null),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"person-edit"},[n("Header",{attrs:{app:e.app,left:!0,title:e.selectedPerson.name},scopedSlots:e._u([{key:"left",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.$router.go(-1)}}},[e._v("\n                Â«\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("label",[e._v("Person Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedPerson.name,expression:"selectedPerson.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.selectedPerson.name},on:{blur:function(t){return e.app.save(e.selectedPerson,"name")},input:function(t){t.target.composing||e.$set(e.selectedPerson,"name",t.target.value)}}})]),n("div",{staticClass:"field"},[n("button",{staticClass:"full-width button-small button-gray",on:{click:function(t){return e.app.remove(e.app.people,e.selectedPerson,"person",!1,!0)}}},[e._v("\n                Delete This Person\n            ")])])])],1)},oe=[],se={name:"personEdit",components:{Header:L},props:["app"],computed:{selectedPerson:function(){var e=this;return e.app.people.find(function(t){return t.id+""===e.$route.params.id+""})}}},ie=se,re=Object(S["a"])(ie,ae,oe,!1,null,null,null),le=re.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"analytics"},[n("Header",{attrs:{app:e.app,left:!0,title:"Analytics"},scopedSlots:e._u([{key:"left",fn:function(){return[n("router-link",{attrs:{to:"/"}},[e._v("\n                Â«\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"header"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column third-column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.startAt,expression:"startAt"}],attrs:{type:"date"},domProps:{value:e.startAt},on:{input:function(t){t.target.composing||(e.startAt=t.target.value)}}})]),e._m(0),n("div",{staticClass:"column third-column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.endAt,expression:"endAt"}],attrs:{type:"date"},domProps:{value:e.endAt},on:{input:function(t){t.target.composing||(e.endAt=t.target.value)}}})])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLocation,expression:"selectedLocation"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedLocation=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("All Locations")]),e._l(e.app.sortedLocations,function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v("\n                    "+e._s(t.name)+"\n                ")])})],2)]),n("div",{staticClass:"columns"},[n("div",{class:"column "+(1===e.dates.length?"half":"third")+"-column"},[n("div",{staticClass:"graph number-graph"},[n("h1",[e._v(e._s(e.allData.peopleIds.length))]),n("p",[e._v("How many people were present in total?")])])]),1!==e.dates.length?n("div",{staticClass:"column third-column"},[n("div",{staticClass:"graph number-graph"},[n("h1",[e._v(e._s(Math.floor(e.allData.peopleIds.length/e.dates.length)))]),n("p",[e._v("How many were present on average?")])])]):e._e(),n("div",{class:"column "+(1===e.dates.length?"half":"third")+"-column"},[n("div",{staticClass:"graph number-graph"},[n("h1",[e._v(e._s(e.allData.presents))]),n("p",[e._v("How many times were people present?")])])])]),e.selectedLocation?n("div",[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{staticClass:"with-padding align-left"},[e._v("\n                            Name\n                        ")]),e._l(e.dates,function(t){return n("th",{key:"date-heading2-"+t,staticClass:"with-padding"},[e._v("\n                            "+e._s(e.app.formatDate(t))+"\n                        ")])})],2)]),n("tbody",[e.people.length?e._e():n("tr",[n("td",{staticClass:"with-padding",attrs:{colspan:e.dates.length+1}},[e._v("\n                            No information to display.\n                        ")]),n("td",{staticClass:"with-padding"})]),e._l(e.sortedPeople,function(t){return n("tr",{key:t.id},[n("td",{staticClass:"with-padding align-left"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._l(e.dates,function(a){return n("td",{key:"people-date-"+a,staticClass:"icons with-padding"},[e.app.isPresent(e.selectedLocation,t,a)?n("span",{staticClass:"check"},[e._v("âœ“")]):n("span",[e._v("Ã—")])])})],2)})],2),n("tfoot",[n("tr",[n("td",{staticClass:"with-padding"},[e._v("\n                            Total Present\n                        ")]),e._l(e.allData.dates,function(t,a){return n("td",{key:"total-present-"+a,staticClass:"with-padding"},[e._v("\n                            "+e._s(t)+"\n                        ")])})],2)])])]):n("div",[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{staticClass:"with-padding"}),e._l(e.dates,function(t){return n("th",{key:"heading-"+t,staticClass:"with-padding"},[e._v("\n                            "+e._s(e.app.formatDate(t))+"\n                        ")])})],2)]),n("tbody",e._l(e.allData.locations,function(t){return n("tr",{key:"data-location-"+t.location.id},[n("td",{staticClass:"with-padding align-left"},[e._v("\n                            "+e._s(t.location.name)+"\n                        ")]),e._l(t.dates,function(a){return n("td",{key:"location-heading-"+t.location.id+"-"+a,staticClass:"with-padding"},[e._v("\n                            "+e._s(a)+"\n                        ")])})],2)}),0),n("tfoot",[n("tr",[n("td",{staticClass:"with-padding align-left"},[e._v("\n                            Total Present\n                        ")]),e._l(e.allData.dates,function(t,a){return n("td",{key:"total-"+a,staticClass:"with-padding"},[e._v("\n                            "+e._s(t)+"\n                        ")])})],2)])])])])],1)},ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column third-column desktop-only"},[n("p",[e._v("to")])])}],ue=n("4ddc");function de(e){var t=e.substr(0,4),n=e.substr(5,2)-1,a=e.substr(8,2),o=new Date(t,n,a);return o.getFullYear()==t&&o.getMonth()==n&&o.getDate()==a?o:"invalid date"}a["a"].use(ue["a"]);var fe={name:"analytics",components:{Header:L},props:["app"],data:function(){var e=this,t=new Date,n=new Date;return t.setDate(t.getDate()-31),{selectedLocation:"",startAt:t.getFullYear()+"-"+e.app.zeroPad(t.getMonth()+1)+"-"+e.app.zeroPad(t.getDate()),endAt:n.getFullYear()+"-"+e.app.zeroPad(n.getMonth()+1)+"-"+e.app.zeroPad(n.getDate())}},computed:{allData:function(){var e,t,n,a,o,s,i,r,l,p=this,c=p.selectedLocation?[p.selectedLocation]:p.app.locations,u=p.app.people,d=p.dates,f={peopleIds:[],presents:0,locations:[],dates:{}};for(r=0;r<d.length;r++)f.dates[p.app.prepDate(d[r])]=0;for(i=c.length-1;i>=0;i--)for(e=c[i],t={location:e,peopleIds:[],presents:0,dates:{}},f.locations.push(t),r=0;r<d.length;r++)for(s=p.app.prepDate(d[r]),n={presents:0,peopleIds:[]},t.dates[s]=0,l=u.length-1;l>=0;l--)a=u[l],o=p.app.isPresent(e,a,s),o&&(f.presents+=1,-1===f.peopleIds.indexOf(a.id)&&f.peopleIds.push(a.id),n.presents+=1,-1===n.peopleIds.indexOf(a.id)&&n.peopleIds.push(a.id),t.presents+=1,t.dates[s]+=1,-1===t.peopleIds.indexOf(a.id)&&t.peopleIds.push(a.id),f.dates[s]+=1);return f.locations=f.locations.sort(p.app.sortByLocationName),f},dates:function(){var e,t=this,n=t.app.people,a=t.selectedLocation?t.selectedLocation:t.app.locations,o=de(t.startAt),s=de(t.endAt),i=[o];if(!o)return[];while(o<s)for(o=new Date(o),o.setDate(o.getDate()+1),e=n.length-1;e>=0;e--)if(t.app.isPresent(a,n[e],t.app.prepDate(o))){i.push(o);break}return i},sortedPeople:function(){var e=this;return e.people.sort(e.app.sortByName)},people:function(){return this.app.people||[]}}},ve=fe,me=Object(S["a"])(ve,pe,ce,!1,null,null,null),he=me.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings"},[n("Header",{attrs:{app:e.app,left:!0,title:"Passcodes"},scopedSlots:e._u([{key:"left",fn:function(){return[n("router-link",{attrs:{to:"/"}},[e._v("\n                Â«\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("table",{staticClass:"table passcodes"},[e._m(0),n("tbody",e._l(e.app.staff,function(t){return n("tr",{key:t.id},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"staff.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.name},on:{blur:function(n){return e.app.save(t)},input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pin,expression:"staff.pin"}],staticClass:"align-center",attrs:{type:"tel",min:"0",max:"9999",maxlength:"4",pattern:"\\d{4}",placeholder:"0000"},domProps:{value:t.pin},on:{blur:function(n){return e.app.save(t)},input:function(n){n.target.composing||e.$set(t,"pin",n.target.value)}}})]),n("td",{staticClass:"with-padding"},[n("ul",{staticClass:"permissions"},[e._l(e.app.locations,function(t){return n("li",{key:t.id},[n("label",[n("input",{attrs:{type:"checkbox"}}),e._v("\n                                        "+e._s(t.name)+"\n                                    ")])])}),e._m(1,!0),e._m(2,!0)],2)]),n("td",[n("a",{staticClass:"remove",attrs:{href:"javascript:;"},on:{click:function(n){return e.app.remove(e.app.staff,t,"staff member")}}},[e._v("Ã—")])])])}),0)]),n("br"),n("a",{staticClass:"button",attrs:{href:"javascript:;"},on:{click:function(t){return e.app.addStaff()}}},[e._v("\n                + Add Staff\n            ")])])])],1)},_e=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticClass:"with-padding"},[e._v("Name")]),n("th",{staticClass:"with-padding"},[e._v("PIN")]),n("th",{staticClass:"with-padding"},[e._v("Permissions")]),n("th")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("label",[n("input",{attrs:{type:"checkbox"}}),e._v("\n                                        Analytics\n                                    ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("label",[n("input",{attrs:{type:"checkbox"}}),e._v("\n                                        Passcodes\n                                    ")])])}],ye={name:"analytics",props:["app"],components:{Header:L}},xe=ye,be=Object(S["a"])(xe,ge,_e,!1,null,null,null),we=be.exports;a["a"].use(O["a"]);var Ce=new O["a"]({mode:"hash",base:"./",routes:[{path:"/",name:"home",component:z,props:!0},{path:"/analytics",name:"analytics",component:he,props:!0},{path:"/settings",name:"settings",component:we,props:!0},{path:"/people/:id/edit",name:"personEdit",component:le,props:!0},{path:"/locations/:id/edit",name:"locationEdit",component:ne,props:!0},{path:"/locations/:id",name:"location",component:Q,props:!0}]}),Pe=n("386f"),ke=n.n(Pe),Ie=n("ecee"),Ae=n("c074"),Ge=n("ad3d");Ie["c"].add(Ae["a"]),a["a"].config.productionTip=!1,a["a"].use(ke.a,{router:Ce}),a["a"].component("font-awesome-icon",Ge["a"]),new a["a"]({router:Ce,render:function(e){return e(D)}}).$mount("#app")},a695:function(e,t,n){},b37a:function(e,t,n){"use strict";var a=n("a695"),o=n.n(a);o.a}});
//# sourceMappingURL=app.2cefd830.js.map
