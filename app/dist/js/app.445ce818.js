(function(e){function t(t){for(var a,s,r=t[0],c=t[1],l=t[2],d=0,u=[];d<r.length;d++)s=r[d],o[s]&&u.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);p&&p(t);while(u.length)u.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var p=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.isOnline?e._e():n("div",{staticClass:"offline"},[n("h3",[e._v("You are Offline.")]),n("p",[e._v("Offline mode is not yet supported, but coming soon!")])]),e.requirePin?n("div",{staticClass:"content align-center"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.enterPin(t)}}},[n("div",{staticClass:"field"},[n("label",[e._v("What's your PIN?")]),n("br"),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPin,expression:"newPin"}],staticClass:"pin",attrs:{type:"tel",placeholder:"****",maxlength:"4",autofocus:""},domProps:{value:e.newPin},on:{input:function(t){t.target.composing||(e.newPin=t.target.value)}}}),n("span",{staticClass:"pin-error notice red"},[e.pinError?n("span",[e._v(e._s(e.pinError))]):e._e()])]),e._m(0)]),n("p",{staticClass:"align-center logout"},[n("a",{staticClass:"hint",attrs:{href:"javascript:;"},on:{click:function(t){return e.app.logout()}}},[e._v("\n                Reset Data on this Device\n            ")])]),n("p",{staticClass:"align-center hint"},[e._v("\n            Version "+e._s(e.version)+".\n        ")])]):n("div",[e.loading?n("div",{staticClass:"loading content align-center"},[n("p",[e._v("Loading...")])]):n("router-view",{attrs:{app:e.app}}),n("p",{staticClass:"align-center hint"},[e._v("\n            Version "+e._s(e.version)+".\n        ")])],1)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field"},[n("button",{attrs:{type:"submit"}},[e._v("\n                    Enter PIN\n                ")])])}],s=(n("7f7f"),n("28a5"),n("0a0d")),r=n.n(s),c=n("f499"),l=n.n(c),p=n("7618"),d=(n("55dd"),n("7514"),n("422b")),u=n.n(d),f=n("a002"),v=n.n(f),m=n("b5c4"),h=n.n(m),g=n("9224");function _(e){var t=e.method.toUpperCase(),n=new XMLHttpRequest,a=e.data;if("GET"===t&&"object"===Object(p["a"])(a))for(var o in e.url+="?",e.data)e.url+="&"+encodeURIComponent(o)+"="+encodeURIComponent(e.data[o]);else a=l()(a);return n.addEventListener("readystatechange",function(){if(4===n.readyState){if(n.status>=200&&n.status<300||304===n.status)try{return void e.success.call(e.context,JSON.parse(n.responseText),n)}catch(t){e.error.call(e.context,t)}e.error.call(e.context,n)}},!1),n.open(t,e.url,"undefined"===typeof e.async||e.async),"undefined"!==typeof e.beforeSend&&e.beforeSend.call(e.context,n),n.setRequestHeader("content-type","application/json"),n.send(a),n}var y=_,b=h.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32),w={locations:[{id:b(),name:"Main Auditorium",peopleIds:[],_collection:"locations"},{id:b(),name:"Campus #2",peopleIds:[],_collection:"locations"}],people:[{id:b(),name:"Meghann Engberg",_collection:"people"},{id:b(),name:"Dede Pound",_collection:"people"},{id:b(),name:"Zada Geissler",_collection:"people"},{id:b(),name:"Luise Ellingsworth",_collection:"people"},{id:b(),name:"Nichole Bieker",_collection:"people"},{id:b(),name:"Linnea Ginsburg",_collection:"people"},{id:b(),name:"Maynard Marrone",_collection:"people"},{id:b(),name:"Dorian Suriel",_collection:"people"},{id:b(),name:"Shay Azar",_collection:"people"},{id:b(),name:"Caroyln Earley",_collection:"people"},{id:b(),name:"Angelyn Mcdougal",_collection:"people"},{id:b(),name:"Phyllis Carasco",_collection:"people"},{id:b(),name:"Dewey Mccoy",_collection:"people"},{id:b(),name:"Karry Siegal",_collection:"people"},{id:b(),name:"Oretha Bevacqua",_collection:"people"},{id:b(),name:"Kenton Goggans",_collection:"people"},{id:b(),name:"Hermelinda Quevedo",_collection:"people"},{id:b(),name:"Whitney Vanderhoff",_collection:"people"},{id:b(),name:"Arla Cupp",_collection:"people"},{id:b(),name:"Marcene Fernald",_collection:"people"}],staff:[{id:b(),pin:1234,name:"Bob",_collection:"staff"}],dates:[]},x=n("21a6");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("./sw.js")});var P,C,L=15e3,I=h.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32),k={locations:["peopleIds"],people:[],days:["locationId","peopleIds"],staff:[]},A=/\s+?/;function j(e){return"people"===e?"person":"staff"===e?"staff":e.slice(0,-1)}var S={data:function(){var e=this;return window.app=e,{app:e,logo:window.logo||"/img/logo.svg",loading:!0,user:{},requirePin:void 0,isAddingLocation:!1,newPin:"",pinError:void 0,pin:void 0,hints:{},locations:[],people:[],days:[],staff:[],unsaved:[],version:g.version,isPaid:!!window.SECRET_KEY&&"p"===window.SECRET_KEY[0],isOnline:window.navigator.onLine,api:!1,store:v.a.createInstance({name:"attend"})}},mounted:function(){var e=this;window.API_URL?(e.fetchPin(function(){e.applyHints(function(){e.saveUnsavedRemote(function(){e.fetch(function(){e.saveLocal(function(){e.loading=!1,C=setTimeout(function(){e.poll()},L)})})})})}),window.addEventListener("online",function(){e.isOnline=!0,e.poll()}),window.addEventListener("offline",function(){e.isOnline=!1})):alert("Invalid link for Attendance. Please visit the URL in your WordPress dashboard at Settings > Attendance.")},computed:{selectedLocation:function(){var e=this;return e.sortedLocations.find(function(t){return t.id+""===e.$route.params.id+""})},sortedLocations:function(){var e=this;return e.locations.filter(function(e){return"publish"===e._status}).sort(e.sortByName)},sortedPeople:function(){var e=this;return e.people.filter(function(e){return"publish"===e._status}).sort(e.app.sortByPersonName)},sortedDays:function(){var e=this;return e.days.filter(function(e){return"publish"===e._status}).sort(e.app.sortByName)},sortedStaff:function(){var e=this;return e.staff.filter(function(e){return"publish"===e._status}).sort(e.app.sortById)}},watch:{newPin:function(){this.pinError=void 0}},methods:{generatePin:h.a.generateUUID("xxxx",10),resetPin:function(){var e=this;e.pin=void 0,e.store.removeItem("pin")},fetchPin:function(e){var t=this;t.store.getItem("pin",function(n,a){a&&(t.pin=a),e()})},enterPin:function(){var e=this;e.loading=!0,y({method:"POST",url:window.API_URL+"/"+e.newPin+"/pin",data:{pin:e.newPin},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(e.newPin))},success:function(){e.loading=!1,e.pin=e.newPin,e.newPin="",e.store.setItem("pin",e.pin),"function"===typeof e.requirePin&&e.requirePin.call(e),e.requirePin=void 0},error:function(){e.pinError="Invalid PIN.",e.loading=!1}})},hideHint:function(e){var t=this;a["a"].set(t.hints,e,!0),t.store.setItem("hint-"+e,!0)},poll:function(){var e=this;P||(P=!0,clearTimeout(C),e.saveUnsavedRemote(function(){e.fetchRemote(function(){e.afterFetchItems(function(){P=!1,C=setTimeout(function(){e.poll()},L)})})}))},applySeed:function(e){var t=this;if(t.locations.length||t.people.length)return e();t.locations=w.locations,t.people=w.people,t.days=w.days,t.staff=w.staff,e()},merge:function(e,t){if("object"===Object(p["a"])(t))for(var n,a,o=t.length-1;o>=0;o--)if(n=e.find(function(e){return e.id+""===t[o].id+""}),n)for(a in t[o])n[a]=t[o][a];else e.push(t[o])},permittedLocations:function(e){var t=this;return t.sortedLocations.filter(function(n){return t.isPermitted(e.permissions,n.id)})},fetchLocal:function(e){var t=this;u.a.eachSeries(["locations","people","days","staff","unsaved"],function(e,n){t.store.getItem(e,function(a,o){t.merge(t[e],o||[]),n()})},function(){e()})},fetchRemote:function(e){var t=this;u.a.eachSeries(["locations","people","days","staff"],function(e,n){t.ajax("GET","/"+e,function(a,o){t.merge(t[e],o||[]),n()})},function(){e()})},buildItem:function(e,t){return t.id=t.id||I(),t._collection=t._collection||e,t._status=t._status||"publish",t},fetch:function(e){var t=this;t.fetchLocal(function(){t.fetchRemote(function(){t.afterFetchItems(function(){e()})})})},afterFetchItems:function(e){var t=this;u.a.eachSeries(["locations","people","days","staff"],function(e,n){for(var a=t[e],o=a.length-1;o>=0;o--)t.buildItem(e,a[o]),a[o]._lastUpdatedAt=a[o].updatedAt;n()},function(){e()})},addUnsaved:function(e){var t=this,n=t.unsaved.find(function(t){return t.item&&(t.item.id+""===e.item.id+""||t.item.slug+""===e.item.id+"")});if(n)for(var a in e.data)n.data[a]=e.data[a];else t.unsaved.push(e);t.saveUnsavedLocal()},setUser:function(e){var t=this;for(var n in e)t.user[n]=e[n]},ajax:function(e,t,n,a,o){"function"===typeof n&&(o=n,n=void 0),"function"===typeof a&&(o=a,a=void 0);var i=this;i.confirmPin(function(){y({method:e,url:window.API_URL+"/"+i.pin+t,data:n,beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa(i.pin))},success:function(e,t){var n=t.getResponseHeader("x-current-user");i.loading=!1,!a||!e||i.isPersisted(a)&&a._isSaving||(i.merge([a],[e]),i.swapIds(a,e));try{i.setUser(JSON.parse(n))}catch(s){}"function"===typeof o&&o(void 0,e)},error:function(s){if(i.loading=!1,s&&("GET"!==e&&i.addUnsaved({method:e,url:t,data:JSON.parse(l()(n)),item:a?{_collection:a._collection,id:a.id}:void 0}),s.status>200&&(console.error(s),401===s.status)))return i.resetPin(),void i.confirmPin(function(){i.ajax(e,t,n,a,function(){o(),i.poll()})});"function"===typeof o&&o(s)}})})},applyHints:function(e){var t=this;u.a.eachSeries(["lock"],function(e,n){t.store.getItem("hint-"+e,function(o,i){a["a"].set(t.hints,e,!!i),n()})},function(){e()})},confirmPin:function(e){var t=this;t.pin?"function"===typeof e&&e():t.requirePin=e},save:function(e,t,n){"function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0),"object"===Object(p["a"])(e)&&(e._lastUpdatedAt=Math.round(r()()/1e3)),e._isSaving=!0;var a=this;a.saveLocal(e,t,function(){a.saveRemote(e,t,function(t,a){e._isSaving=!1,"function"===typeof n&&n(t,a)})})},isPersisted:function(e){return"object"===Object(p["a"])(e)&&(e.id+"").length<16},saveUnsavedRemote:function(e){var t=this,n=t.unsaved.shift();if(!n)return e();t.saveUnsavedLocal(),n.item&&(n.item=t[n.item._collection].find(function(e){return e.id+""===n.item.id+""||e.slug+""===n.item.id+""}),n.data[j(n.item._collection)].id&&(n.data[j(n.item._collection)].id=n.item.id)),t.ajax(n.method,n.url,n.data,n.item,function(n){if(n)return e();t.saveUnsavedRemote(e)})},saveUnsavedLocal:function(e){var t=this;t.store.setItem("unsaved",t.unsaved,e)},saveLocal:function(e,t,n){"function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0);var a=this;u.a.eachSeries(["locations","people","days","staff"],function(e,t){a.store.setItem(e,a[e].filter(function(e){return"attendance-archive"!==e._status}),function(){t()})},function(){"function"===typeof n&&n()})},saveRemote:function(e,t,n){"function"===typeof t&&(n=t,t=void 0),"function"===typeof e&&(n=e,e=void 0);var a=this;"object"!==Object(p["a"])(e)?u.a.eachSeries(["locations","people","days","staff"],function(e,t){u.a.eachSeries(a[e],function(e,t){a.saveRemoteItem(e,t)},function(){t()})},function(){"function"===typeof n&&n()}):a.saveRemoteItem(e,t,n)},saveRemoteItem:function(e,t,n){"function"===typeof t&&(n=t,t=void 0);var a=this,o={};t?(o[j(e._collection)]={},o[j(e._collection)].id=e.id,o[j(e._collection)][t]=e[t]):o[j(e._collection)]=e,a.ajax("POST","/"+e._collection,o,e,function(e,t){"function"===typeof n&&n(e,t)})},swapIds:function(e,t){if(t&&e.id!==t.id){var n,a=this,o=e.id,i=j(e._collection);if(a[e._collection].find(function(e){return e.id===t.id}))return void a[e._collection].splice(a[e._collection].indexOf(e),1);for(n in e.id=t.id,k){var s=e._collection+"Ids";-1!==k[n].indexOf(s)&&a[n].forEach(function(e){var n=e[s].indexOf(o);-1!==n&&(e[s][n]=t.id,a.saveRemoteItem(e))}),s=i+"Id",-1!==k[n].indexOf(s)&&a[n].filter(function(e){e[s]===o&&(e[s]=t.id,a.saveRemoteItem(e))})}}},addPersonByName:function(e,t,n,a){var o=this,i=o.buildItem("people",{name:t});o.people.push(i),a&&(a.q=""),o.save(i,function(){e.peopleIds.push(i.id),o.save(e)}),n&&o.present(e,i,n)},prepDate:function(e){var t=this;return e instanceof Date?e.getFullYear()+"-"+t.zeroPad(e.getMonth()+1)+"-"+t.zeroPad(e.getDate()):e},formatDate:function(e){var t=e.toDateString().split(" ");return t[1]+" "+t[2]},isPresent:function(e,t,n){var a=this;if(e instanceof Array){for(var o=e.length-1;o>=0;o--)if(a.isPresent(e[o],t,n))return!0;return!1}var i=a.findDay(e,n);return i&&i.peopleIds instanceof Array&&-1!==i.peopleIds.indexOf(t.id)},findDay:function(e,t){var n=this,a=n.prepDate(t),o=n.sortedDays.filter(function(t){return t.date===a&&t.locationId===e.id}).sort(n.sortById)[0];return o||(o=n.buildItem("days",{name:[e.id,a].join(","),date:a,locationId:e.id,peopleIds:[]}),n.days.push(o)),o},ensurePersisted:function(e,t){var n=this;if(n.isPersisted(e))return t();n.save(e,t)},present:function(e,t,n){var a=this,o=a.prepDate(n),i=a.findDay(e,n),s=a.isPresent(e,t,o);i.peopleIds=i.peopleIds||[],s?i.peopleIds.splice(i.peopleIds.indexOf(t.id),1):i.peopleIds.push(t.id),a.saveLocal(),a.ensurePersisted(i,function(){var e={item:{type:"day",id:i.id},delta:{attr:"peopleIds",value:t.id}};e.delta.action=s?"remove":"add",a.ajax("POST","/delta",e)})},addLocation:function(){var e=this,t=e.locations.length+1,n=e.buildItem("locations",{name:"Location "+t,peopleIds:[]});e.isAddingLocation=!0,e.locations.push(n),e.save(n,function(){e.isAddingLocation=!1,e.$router.push({name:"locationEdit",params:{id:n.id}})})},addStaff:function(){var e=this,t=e.staff.length+1,n=e.buildItem("staff",{name:"Staff "+t,pin:e.generatePin()});e.staff.push(n),e.save(n)},isPermitted:function(e,t){var n;return e instanceof Array?n=e:(e.permissions=e.permissions||[],n=e.permissions),-1!==n.indexOf("admin")||-1!==n.indexOf(t)},togglePermissions:function(e,t){var n=this;n.isPermitted(e,t)?e.permissions.splice(e.permissions.indexOf(t),1):e.permissions.push(t),n.save(e,"permissions")},remove:function(e,t,n,a,o){var i=this;confirm("Are you sure you want to delete this "+n+"?")&&(t._status="attendance-archive",i.save(t,"_status"),a?i.$router.push("/"):o&&i.$router.push("/"))},star:function(e,t){e.peopleIds=e.peopleIds||[];var n=this,a=n.isStarred(e,t);a?e.peopleIds.splice(e.peopleIds.indexOf(t.id),1):e.peopleIds.push(t.id),n.saveLocal(),n.ensurePersisted(e,function(){var o={item:{type:"location",id:e.id},delta:{attr:"peopleIds",value:t.id}};o.delta.action=a?"remove":"add",n.ajax("POST","/delta",o)})},isStarred:function(e,t){return e.peopleIds=e.peopleIds||[],-1!==e.peopleIds.indexOf(t.id)},zeroPad:function(e,t,n){return t=t||2,n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},personName:function(e){var t=e.name.split(A);return t.pop()+(t.length?", "+t.join(" "):"")},sortByName:function(e,t){return(""+e.name).localeCompare(t.name,void 0,{numeric:!0})},sortByPersonName:function(e,t){var n=this;return n.personName(e).localeCompare(n.personName(t),void 0,{numeric:!0})},sortById:function(e,t){return(""+e.id).localeCompare(t.id,void 0,{numeric:!0})},sortByCollection:function(e,t){return(""+e.location.name).localeCompare(t.location.name)},logout:function(){var e=this;confirm("This will wipe all Attendance data off this device. All unsaved changes will be lost. Are you sure you want to log out?")&&(e.resetPin(),u.a.eachSeries(["locations","people","days","staff","unsaved"],function(t,n){e.store.removeItem(t,n)},function(){e.$router.push("/"),window.location.reload()}))},parseYMD:function(e){var t=e.substr(0,4),n=e.substr(5,2)-1,a=e.substr(8,2),o=new Date(t,n,a);return o.getFullYear()==t&&o.getMonth()==n&&o.getDate()==a?o:"invalid date"},downloadTable:function(e,t){for(var n,a="",o=[t.header].concat(t.body).concat([t.footer]),i=0;i<o.length;i++)n=o[i],a+='"'+n.shift()+'"',n.length&&(a+=","+n.join(",")),a+="\r\n";Object(x["saveAs"])(new Blob([a],{type:"text/csv;charset=utf-8"}),e)},buildCollectionReport:function(e,t,n,a,o){var i,s,r,c,l,p,d,u=this,f=t,v=[];if(!f)return[];while(f<=n){for(c={},p=0,i=u.app.prepDate(f),r=u.app.sortedDays.filter(function(e){return e.date===i}),d=0;d<e.length;d++)s=e[d],l=a(r,s),c[s.id]="function"===typeof o?o(l):l,p+=l;p>0&&v.push({raw:f,counts:c,total:p}),f=new Date(f),f.setDate(f.getDate()+1)}return v},reportTableData:function(e,t,n,a,o){var i,s,r,c,l,p=this,d=[n],u=[],f=["Total"];for(c=0;c<t.length;c++)d.push(p.app.formatDate(t[c].raw));for(l=0;l<e.length;l++){for(i=e[l],r=["function"===typeof a?a(i):i.name],s=[],c=0;c<t.length;c++)s.push(t[c].counts[i.id]);o&&!s.filter(function(e){return 0!==e}).length||u.push(r.concat(s))}for(c=0;c<t.length;c++)f.push(t[c].total);return{header:d,body:u,footer:f}}}},N=S,O=(n("b37a"),n("2877")),D=Object(O["a"])(N,o,i,!1,null,null,null),E=D.exports,R=n("8c4f"),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Header",{attrs:{app:e.app,title:"Attend"}}),n("div",{staticClass:"content home-content"},[n("div",{staticClass:"location-table"},[n("table",{staticClass:"table"},[n("tbody",[e.app.permittedLocations(e.app.user).length?e._e():n("tr",[e._m(0)]),e._l(e.app.permittedLocations(e.app.user),function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{attrs:{to:{name:"location",params:{id:t.id}}}},[n("font-awesome-icon",{attrs:{icon:"location-arrow"}}),e._v("\n                                "+e._s(t.name)+"\n                            ")],1)],1)])})],2)])]),n("div",{staticClass:"actions-table"},[n("table",{staticClass:"table"},[n("tbody",[e.app.isPermitted(e.app.user,"admin")?n("tr",[n("td",[!e.app.sortedLocations.length||e.app.isPaid?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return t.preventDefault(),e.app.addLocation()}}},[n("strong",[n("font-awesome-icon",{attrs:{icon:"location-arrow"}}),e.app.isAddingLocation?n("span",[e._v(" Adding Location...")]):n("span",[e._v(" Add A Location")])],1)]):n("a",{attrs:{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=29U2LHYQNAURL",target:"_blank"}},[n("strong",[n("font-awesome-icon",{attrs:{icon:"project-diagram"}}),e._v("\n                                    Upgrade to Add More Locations!\n                                ")],1)])])]):e._e(),e.app.sortedLocations.length&&e.app.isPermitted(e.app.user,"admin")?n("tr",[n("td",[n("router-link",{attrs:{to:"/reports"}},[n("strong",[n("font-awesome-icon",{attrs:{icon:"chart-bar"}}),e._v("\n                                    Reports\n                                ")],1)])],1)]):e._e(),e.app.isPermitted(e.app.user,"admin")?n("tr",[n("td",[n("router-link",{attrs:{to:"/settings"}},[n("strong",[n("font-awesome-icon",{attrs:{icon:"users"}}),e._v("\n                                    Staff\n                                ")],1)])],1)]):e._e(),n("tr",[n("td",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.logout()}}},[n("font-awesome-icon",{attrs:{icon:"lock"}}),e._v("\n                                Log Out\n                            ")],1)])])])])])])],1)},q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("a",{staticClass:"align-center"},[e._v("\n                                You have no locations!\n                            ")])])}],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"nav table"},[n("ul",{staticClass:"table-row"},[n("li",{staticClass:"table-cell back-cell"},[e.left?e._t("left"):n("a",{staticStyle:{visibility:"hidden"},attrs:{href:"javascript:;"}},[e._v("\n                    «\n                ")])],2),n("li",{staticClass:"table-cell logo"},[n("a",[e._v(e._s(e.title))])]),n("li",{staticClass:"table-cell back-cell"},[e.right?e._t("right"):n("a",{staticStyle:{visibility:"hidden"},attrs:{href:"javascript:;"}},[e._v("\n                    »\n                ")])],2)])])])},T=[],M={props:["app","back","title","right","left"]},H=M,B=Object(O["a"])(H,$,T,!1,null,null,null),Y=B.exports,z={name:"home",props:["app"],components:{Header:Y}},F=z,G=Object(O["a"])(F,U,q,!1,null,null,null),W=G.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"location"},[n("Header",{attrs:{app:e.app,left:!0,right:e.app.isPermitted(e.app.user,"admin"),title:e.app.selectedLocation?e.app.selectedLocation.name:"Location"},scopedSlots:e._u([{key:"left",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.$router.push("/")}}},[e._v("\n                «\n            ")])]},proxy:!0},{key:"right",fn:function(){return[n("router-link",{attrs:{to:{name:"locationEdit",params:{id:e.app.selectedLocation.id}}}},[e._v("\n                ✎\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"header no-select"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],attrs:{type:"date"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}}),e.q.length?n("span",{staticClass:"clear-q active",on:{click:function(t){e.q=""}}},[e._v("×")]):e._e(),e.q.length?e._e():n("span",{class:(e.showAll?"active ":"")+"show-all",on:{click:function(t){e.showAll=!e.showAll}}},[e.showAll?n("span",[e._v("Everyone")]):n("span",[e._v("Regulars")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.q,expression:"q"}],attrs:{type:"text",placeholder:"Search or Add..."},domProps:{value:e.q},on:{input:function(t){t.target.composing||(e.q=t.target.value)}}})]),n("table",{staticClass:"table pretty"},[e._m(0),n("tbody",[e._l(e.filteredPeople,function(t){return n("tr",{key:t.id},[n("td",[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return e.app.star(e.app.selectedLocation,t)}}},[e.app.isStarred(e.app.selectedLocation,t)?n("span",{staticClass:"lock"},[e._v("🔒")]):n("span",[e._v(" ")])])]),n("td",{staticClass:"align-left"},[n("router-link",{attrs:{to:{name:"personEdit",params:{id:t.id}}}},[e._v("\n                            "+e._s(e.app.personName(t))+"\n                        ")])],1),n("td",{staticClass:"icons"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return e.app.present(e.app.selectedLocation,t,e.date)}}},[e.app.isPresent(e.app.selectedLocation,t,e.date)?n("span",{staticClass:"check"},[e._v("✓")]):n("span",{staticClass:"uncheck"},[e._v("×")])])])])}),e.q.length?n("tr",[n("td",{staticClass:"with-padding align-left",attrs:{colspan:"3"}},[e.q.length?n("span",[e.app.sortedPeople.length<25||e.app.isPaid?n("button",{on:{click:function(t){return t.preventDefault(),e.app.addPersonByName(e.app.selectedLocation,e.q,e.date,e.component)}}},[e._v('\n                                Add "'+e._s(e.q)+'"\n                            ')]):n("a",{staticClass:"button",attrs:{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=29U2LHYQNAURL",target:"_blank"}},[e._v("\n                                Upgrade to Add More People!\n                            ")])]):e._e()])]):e._e(),e.filteredPeople.length?e._e():n("tr",[n("td",{staticClass:"with-padding align-left",attrs:{colspan:"3"}},[n("p",{staticClass:"display-block align-center"},[n("br"),n("br"),e.q.length?n("span",[e._v("\n                                We couldn't find anyone that matches \""+e._s(e.q)+'."\n                            ')]):n("span",[e._v("\n                                Nobody is here!\n                            ")]),e.app.sortedPeople.length?n("span",[n("br"),n("br"),n("a",{staticClass:"button button-gray",attrs:{href:"javascript:;"},on:{click:function(t){e.q="",e.showAll=!0}}},[e._v("\n                                    Show Everyone\n                                ")])]):e._e(),n("br"),n("br")])])])],2),n("tfoot",[n("tr",[n("td"),e._m(1),n("td",{staticClass:"with-padding"},[e._v(e._s(e.total))])])])])])],1)},K=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticClass:"has-checkbox"},[e._v("\n                        Reg\n                    ")]),n("th",{staticClass:"with-padding align-left"},[e._v("\n                        Name\n                    ")]),n("th",{staticClass:"with-padding"},[e._v("\n                        Present\n                    ")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{staticClass:"with-padding"},[n("strong",[e._v("Total")])])}],Q={name:"location",components:{Header:Y},props:["app"],data:function(){var e=this,t=new Date;return{q:"",component:this,date:t.getFullYear()+"-"+e.app.zeroPad(t.getMonth()+1)+"-"+e.app.zeroPad(t.getDate()),transition:void 0,showAll:!1}},computed:{filteredPeople:function(){var e=this,t=e.app.sortedPeople||[],n=e.app.selectedLocation,a=e.q.toLowerCase();return a&&a.length?t.filter(function(e){return-1!==e.name.toLowerCase().indexOf(a)}):t.filter(function(t){return e.showAll||n&&(-1!==n.peopleIds.indexOf(t.id)||e.app.isPresent(n,t,e.date))})},total:function(){var e=this;return e.app.sortedPeople.filter(function(t){return e.app.isPresent(e.app.selectedLocation,t,e.date)}).length}}},V=Q,X=Object(O["a"])(V,J,K,!1,null,null,null),Z=X.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"location-edit"},[n("Header",{attrs:{app:e.app,left:!0,title:e.app.selectedLocation.name},scopedSlots:e._u([{key:"left",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.$router.go(-1)}}},[e._v("\n                «\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("label",[e._v("Location Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{type:"text",autofocus:""},domProps:{value:e.newName},on:{blur:function(t){return e.changeName()},input:function(t){t.target.composing||(e.newName=t.target.value)}}})]),n("div",{staticClass:"field"},[n("button",{staticClass:"full-width button-small button-gray",on:{click:function(t){return e.app.remove(e.app.locations,e.app.selectedLocation,"location",!0)}}},[e._v("\n                Delete This Location\n            ")])])])],1)},te=[],ne={name:"locationEdit",components:{Header:Y},props:["app"],data:function(){return{newName:""}},watch:{"app.selectedLocation":function(){var e=this;e.app.selectedLocation||e.$router.push("/")}},mounted:function(){var e=this;e.newName=e.app.selectedLocation.name},methods:{changeName:function(){var e=this;e.app.selectedLocation.name=e.newName,e.app.save(e.app.selectedLocation,"name")}}},ae=ne,oe=Object(O["a"])(ae,ee,te,!1,null,null,null),ie=oe.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"person-edit"},[n("Header",{attrs:{app:e.app,left:!0,title:e.selectedPerson.name},scopedSlots:e._u([{key:"left",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.$router.go(-1)}}},[e._v("\n                «\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("label",[e._v("Person Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{type:"text",autofocus:""},domProps:{value:e.newName},on:{blur:function(t){return e.changeName()},input:function(t){t.target.composing||(e.newName=t.target.value)}}})]),n("div",{staticClass:"field"},[n("button",{staticClass:"full-width button-small button-gray",on:{click:function(t){return e.app.remove(e.app.people,e.selectedPerson,"person",!1,!0)}}},[e._v("\n                Delete This Person\n            ")])])])],1)},re=[],ce={name:"personEdit",components:{Header:Y},props:["app"],data:function(){return{newName:""}},computed:{selectedPerson:function(){var e=this;return e.app.people.find(function(t){return t.id+""===e.$route.params.id+""})}},mounted:function(){var e=this;e.newName=e.selectedPerson.name},methods:{changeName:function(){var e=this;e.selectedPerson.name=e.newName,e.app.save(e.selectedPerson,"name")}}},le=ce,pe=Object(O["a"])(le,se,re,!1,null,null,null),de=pe.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reports"},[n("Header",{attrs:{app:e.app,left:!0,right:!0,title:"Reports"},scopedSlots:e._u([{key:"left",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.$router.push("/")}}},[e._v("\n                «\n            ")])]},proxy:!0},{key:"right",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.downloadTable(e.filename,e.tableData)}}},[n("font-awesome-icon",{attrs:{icon:"download"}})],1)]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"header"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column third-column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.startAt,expression:"startAt"}],attrs:{type:"date"},domProps:{value:e.startAt},on:{input:function(t){t.target.composing||(e.startAt=t.target.value)}}})]),e._m(0),n("div",{staticClass:"column third-column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.endAt,expression:"endAt"}],attrs:{type:"date"},domProps:{value:e.endAt},on:{input:function(t){t.target.composing||(e.endAt=t.target.value)}}})])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLocation,expression:"selectedLocation"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedLocation=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("All Locations")]),e._l(e.app.sortedLocations,function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v("\n                    "+e._s(t.name)+"\n                ")])})],2)]),n("Table",{attrs:{data:e.tableData,pretty:!!e.selectedLocation}}),n("form",[n("div",{staticClass:"field"},[n("br"),e.selectedLocation?n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.hideEmpties},on:{change:function(t){e.hideEmpties=!e.hideEmpties}}}),e._v("\n                    Hide Absentees\n                ")]):e._e()])])],1)],1)},fe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column third-column desktop-only"},[n("p",[e._v("to")])])}],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{class:"table "+(e.pretty?"pretty":"")},[n("thead",[n("tr",e._l(e.data.header,function(t,a){return n("th",{key:"org-thead-th-"+a+Math.random(),class:"with-padding "+(0===a?"align-left":"")},[e._v("\n                "+e._s(t)+"\n            ")])}),0)]),n("tbody",e._l(e.data.body,function(t,a){return n("tr",{key:"org-tbody-tr-"+a+Math.random()},e._l(t,function(t,a){return n("td",{key:"org-tbody-tr-td-"+a+Math.random(),class:"with-padding "+(0===a?"align-left":"")},[e.pretty&&1===t?n("span",{staticClass:"check"},[e._v("✓")]):n("span",{class:a>0?"number":""},[e._v(e._s(t))])])}),0)}),0),n("tfoot",[n("tr",e._l(e.data.footer,function(t,a){return n("td",{key:"org-tfoot-"+a+Math.random(),class:"with-padding "+(0===a?"align-left":"")},[e._v("\n                "+e._s(t)+"\n            ")])}),0)])])},me=[],he={props:["data","pretty"]},ge=he,_e=Object(O["a"])(ge,ve,me,!1,null,null,null),ye=_e.exports,be={name:"reports",components:{Header:Y,Table:ye},props:["app"],data:function(){var e=this,t=new Date,n=new Date;return t.setDate(t.getDate()-15),{selectedLocation:"",hideEmpties:!0,startAt:t.getFullYear()+"-"+e.app.zeroPad(t.getMonth()+1)+"-"+e.app.zeroPad(t.getDate()),endAt:n.getFullYear()+"-"+e.app.zeroPad(n.getMonth()+1)+"-"+e.app.zeroPad(n.getDate())}},computed:{selectedLocations:function(){return this.app.sortedLocations},filename:function(){var e=this;return(e.selectedLocation?e.selectedLocation.name:"All Locations")+" ("+e.startAt+" to "+e.endAt+").csv"},tableData:function(){var e,t,n=this,a=n.app.parseYMD(n.startAt),o=n.app.parseYMD(n.endAt);return n.selectedLocation?(e="Person",t=n.app.buildCollectionReport(n.app.sortedPeople,a,o,function(e,t){var a=e.find(function(e){return e.locationId===n.selectedLocation.id&&e.peopleIds&&-1!==e.peopleIds.indexOf(t.id)});return a?1:0}),n.app.reportTableData(n.app.sortedPeople,t,e,function(e){return n.app.personName(e)},n.hideEmpties)):(e="Location",t=n.app.buildCollectionReport(n.selectedLocations,a,o,function(e,t){var n=e.find(function(e){return e.locationId===t.id});return n?n.peopleIds.length:0}),n.app.reportTableData(n.selectedLocations,t,e))}}},we=be,xe=Object(O["a"])(we,ue,fe,!1,null,null,null),Pe=xe.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings"},[n("Header",{attrs:{app:e.app,left:!0,title:"Staff"},scopedSlots:e._u([{key:"left",fn:function(){return[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.app.$router.push("/")}}},[e._v("\n                «\n            ")])]},proxy:!0}])}),n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("table",{staticClass:"table passcodes no-hover"},[e._m(0),n("tbody",e._l(e.app.sortedStaff,function(t){return n("tr",{key:t.id},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"staff.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.name},on:{blur:function(n){return e.app.save(t)},input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pin,expression:"staff.pin"}],staticClass:"align-center",attrs:{type:"tel",min:"0",max:"9999",maxlength:"4",pattern:"\\d{4}",placeholder:"0000"},domProps:{value:t.pin},on:{blur:function(n){return e.changePin(t)},input:function(n){n.target.composing||e.$set(t,"pin",n.target.value)}}})]),n("td",{staticClass:"with-padding"},[n("ul",{staticClass:"permissions"},[e._l(e.app.sortedLocations,function(a){return n("li",{key:a.id},[n("label",[n("input",{attrs:{type:"checkbox",disabled:e.app.isPermitted(t,"admin")},domProps:{checked:e.app.isPermitted(t,a.id)},on:{change:function(n){return e.app.togglePermissions(t,a.id)}}}),e._v("\n                                        "+e._s(a.name)+"\n                                    ")])])}),n("li",[n("label",[n("input",{attrs:{type:"checkbox",disabled:e.app.user.id===t.id},domProps:{checked:e.app.isPermitted(t,"admin")},on:{change:function(n){return e.app.togglePermissions(t,"admin")}}}),e._v("\n                                        Admin\n                                    ")])])],2)]),n("td",[n("a",{staticClass:"remove",attrs:{href:"javascript:;"},on:{click:function(n){return e.app.remove(e.app.staff,t,"staff member")}}},[e._v("×")])])])}),0)]),n("br"),!e.app.sortedStaff.length||e.app.isPaid?n("a",{staticClass:"button",attrs:{href:"javascript:;"},on:{click:function(t){return t.preventDefault(),e.app.addStaff()}}},[e._v("\n                + Add Staff\n            ")]):n("a",{staticClass:"button",attrs:{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=29U2LHYQNAURL",target:"_blank"}},[e._v("\n                Upgrade to Add More Staff!\n            ")]),n("br"),n("br"),n("p",{staticClass:"hint"},[e._v("*Admins have access to create, edit, and delete all Locations and Staff, as well as see detailed Reports.")])])])],1)},Le=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticClass:"with-padding"},[e._v("Name")]),n("th",{staticClass:"with-padding"},[e._v("PIN")]),n("th",{staticClass:"with-padding"},[e._v("Permissions")]),n("th")])])}],Ie={name:"analytics",props:["app"],components:{Header:Y},methods:{changePin:function(e){var t=this;if(t.app.sortedStaff.filter(function(t){return t!==e&&t.pin+""===e.pin+""}).length)return alert("The PIN is already taken."),void(e.pin=t.app.generatePin());t.app.save(e,"pin")}}},ke=Ie,Ae=Object(O["a"])(ke,Ce,Le,!1,null,null,null),je=Ae.exports;a["a"].use(R["a"]);var Se=new R["a"]({mode:"hash",base:"./",routes:[{path:"/",name:"home",component:W,props:!0},{path:"/reports",name:"reports",component:Pe,props:!0},{path:"/settings",name:"settings",component:je,props:!0},{path:"/people/:id/edit",name:"personEdit",component:de,props:!0},{path:"/locations/:id/edit",name:"locationEdit",component:ie,props:!0},{path:"/locations/:id",name:"location",component:Z,props:!0}]}),Ne=n("386f"),Oe=n.n(Ne),De=n("ecee"),Ee=n("c074"),Re=n("ad3d");De["c"].add(Ee["v"],Ee["l"],Ee["b"],Ee["k"],Ee["g"],Ee["u"],Ee["d"],Ee["o"],Ee["a"],Ee["w"],Ee["x"],Ee["i"],Ee["e"],Ee["m"],Ee["j"],Ee["t"],Ee["f"],Ee["s"],Ee["r"],Ee["c"],Ee["y"],Ee["p"],Ee["n"],Ee["q"],Ee["h"]),a["a"].config.productionTip=!1,a["a"].use(Oe.a,{router:Se}),a["a"].component("font-awesome-icon",Re["a"]),new a["a"]({router:Se,render:function(e){return e(E)}}).$mount("#app")},9224:function(e){e.exports={name:"attend",version:"1.1.1",private:!0,scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build",lint:"vue-cli-service lint"},dependencies:{"@fortawesome/fontawesome-svg-core":"^1.2.17","@fortawesome/free-solid-svg-icons":"^5.8.1","@fortawesome/vue-fontawesome":"^0.1.6",aes256:"^1.0.4","babel-helper-vue-jsx-merge-props":"^2.0.3","file-saver":"^2.0.2",localforage:"^1.7.3","no-async":"^1.1.6","uniq-id":"^1.0.0",vue:"^2.6.6","vue-router":"^3.0.1","vue-scroll-behavior":"^0.2.0","vue-trend-chart":"^0.14.4"},devDependencies:{"@vue/cli-plugin-babel":"^3.5.0","@vue/cli-plugin-eslint":"^3.5.0","@vue/cli-service":"^3.5.0","babel-eslint":"^10.0.1",eslint:"^5.8.0","eslint-plugin-vue":"^5.0.0","node-sass":"^4.11.0","sass-loader":"^7.1.0","vue-template-compiler":"^2.5.21"},eslintConfig:{root:!0,env:{node:!0},extends:["plugin:vue/essential","eslint:recommended"],rules:{},parserOptions:{parser:"babel-eslint"}},postcss:{plugins:{autoprefixer:{}}},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},a695:function(e,t,n){},b37a:function(e,t,n){"use strict";var a=n("a695"),o=n.n(a);o.a}});
//# sourceMappingURL=app.445ce818.js.map